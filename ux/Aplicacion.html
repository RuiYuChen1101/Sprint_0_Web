<!-- ---------------------------------------------------- -->
<!-- ---------------------------------------------------- -->
<!DOCTYPE html>
<html>

<!-- ---------------------------------------------------- -->
<!-- ---------------------------------------------------- -->
<head>
<meta charset="utf-8"/>         

<!-- ---------------------------------------------------- -->
<script src="logicaFake/diHola.js"></script>
<script src="logicaFake/hacerLogin.js"></script>
<script src="logicaFake/recuperarmedicion.js"></script>

<!-- ---------------------------------------------------- -->
<script>
  function loginPulsado() {
  
  var nombre = document.getElementById("nombre").value
  var password = document.getElementById("password").value
  
  // llamo a la función de la lógica (versión fake)
  hacerLogin( nombre, password, function( res ) {
    // cuando tenga el resultado lo muestro
    document.getElementById("salida").innerHTML = " login= " + res.resultado;
  
    // si el login es correcto
    if ( res.resultado == true ) {
      alert(" login ok " )
    } else {
      alert(" fallo en login (el password es: 1234)" )
    }
  })
  
  }
</script>

<!-- ---------------------------------------------------- -->
<script>
function diHolaPulsado() {

// llamo a la función de la lógica (versión fake)
diHola( function( err, res ) {
  if ( err ) {
   alert( "usuario no acreditado" )
   return
  }

  document.getElementById("salida").innerHTML = res.nombre + " dice: "
  + res.saludo;
})

}
</script>

<!-- ---------------------------------------------------- -->
<script>
  function recuperarMedicionPulsado() {

    recuperarmedicion(function (err, res) {
      if (err) {
        console.log(err);
    } else {
        console.log(res);
        if (res.success === "1" && res.data && res.data.id && res.data.temperatura && res.data.co2) {
            // The response appears to be in the expected structure
            // You can directly access the data properties
            var output = "ID: " + res.data.id + ", Temperatura: " + res.data.temperatura + ", CO2: " + res.data.co2;
            document.getElementById("salida_medicion").innerHTML = output;
        } else {
            document.getElementById("salida_medicion").innerHTML = "Data structure is not as expected.";
        }
    }
    });
  }
</script>


</head>

<!-- ---------------------------------------------------- -->
<!-- ---------------------------------------------------- -->
<body>

<h1>Aplicación web</h1>

<form>
  usuario:<br>
  <input id="nombre" type="text" name="nombre" value="Mickey">
  <br>
  password:<br>
  <input id="password" type="password" name="password" value="Mouse">
  <br>
</form> 

<p>
<button type="buton" onclick="loginPulsado()">Log in</button>
<button type="button" onclick="diHolaPulsado()">Llamar hola</button>

<p>

<button onclick="recuperarMedicionPulsado()">Recuperar Medicion</button>

<p id="salida">Antes</p>
<div id="salida_medicion"></div>

</body>
</html>
<!-- ---------------------------------------------------- -->
<!-- ---------------------------------------------------- -->
<!-- ---------------------------------------------------- -->
<!-- ---------------------------------------------------- -->
